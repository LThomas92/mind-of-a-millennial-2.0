{"ast":null,"code":"var fs = require('fs');\n\nvar path = require('path');\n\nvar jsdom = require('jsdom');\n\nvar JSDOM = jsdom.JSDOM;\n\nvar quillFilePath = require.resolve('quill');\n\nvar quillMinFilePath = quillFilePath.replace('quill.js', 'quill.min.js');\nvar quillLibrary = fs.readFileSync(quillMinFilePath);\nvar mutationObserverPolyfill = fs.readFileSync(path.join(__dirname, 'polyfill.js'));\nvar JSDOM_TEMPLATE = \"\\n  <div id=\\\"editor\\\">hello</div>\\n  <script>\".concat(mutationObserverPolyfill, \"</script>\\n  <script>\").concat(quillLibrary, \"</script>\\n  <script>\\n    document.getSelection = function() {\\n      return {\\n        getRangeAt: function() { }\\n      };\\n    };\\n    document.execCommand = function (command, showUI, value) {\\n      try {\\n          return document.execCommand(command, showUI, value);\\n      } catch(e) {}\\n      return false;\\n    };\\n  </script>\\n\");\nvar JSDOM_OPTIONS = {\n  runScripts: 'dangerously',\n  resources: 'usable'\n};\nvar DOM = new JSDOM(JSDOM_TEMPLATE, JSDOM_OPTIONS);\nvar QUILL = new DOM.window.Quill('#editor');\n\nexports.convertTextToDelta = function (text) {\n  QUILL.setText(text);\n  var delta = QUILL.getContents();\n  return delta;\n};\n\nexports.convertHtmlToDelta = function (html) {\n  var delta = QUILL.clipboard.convert(html);\n  return delta;\n};\n\nexports.convertDeltaToHtml = function (delta) {\n  QUILL.setContents(delta);\n  var html = QUILL.root.innerHTML;\n  return html;\n};","map":null,"metadata":{},"sourceType":"script"}