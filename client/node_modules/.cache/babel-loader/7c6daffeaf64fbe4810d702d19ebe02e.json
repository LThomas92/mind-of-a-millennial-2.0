{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getSelectedBlocks = require('./getSelectedBlocks');\n\nvar _getSelectedBlocks2 = _interopRequireDefault(_getSelectedBlocks);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function (strategy) {\n  return function (editorState, selection) {\n    var contentState = editorState.getCurrentContent();\n    var currentSelection = selection || editorState.getSelection();\n    var startKey = currentSelection.getStartKey();\n    var endKey = currentSelection.getEndKey();\n    var startOffset = currentSelection.getStartOffset();\n    var endOffset = currentSelection.getEndOffset();\n    var isSameBlock = startKey === endKey;\n    var selectedBlocks = (0, _getSelectedBlocks2.default)(contentState, startKey, endKey);\n    var entityFound = false; // We have to shift the offset to not get false positives when selecting\n    // a character just before or after an entity\n\n    var finalStartOffset = startOffset + 1;\n    var finalEndOffset = endOffset - 1;\n    selectedBlocks.forEach(function (block) {\n      strategy(block, function (start, end) {\n        if (entityFound) {\n          return;\n        }\n\n        var blockKey = block.getKey();\n\n        if (isSameBlock && (end < finalStartOffset || start > finalEndOffset)) {\n          return;\n        } else if (blockKey === startKey && end < finalStartOffset) {\n          return;\n        } else if (blockKey === endKey && start > finalEndOffset) {\n          return;\n        }\n\n        entityFound = true;\n      }, contentState);\n    });\n    return entityFound;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}